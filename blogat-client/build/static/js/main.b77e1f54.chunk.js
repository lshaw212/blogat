(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){e.exports=a.p+"static/media/layout1.795729ba.jpg"},123:function(e,t,a){e.exports=a.p+"static/media/layout2.695b1e25.jpg"},124:function(e,t,a){e.exports=a.p+"static/media/layout3.0cf79b24.jpg"},125:function(e,t,a){e.exports=a.p+"static/media/layout4.01bbb075.jpg"},138:function(e,t,a){e.exports=a(262)},143:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),i=(a(143),a(277)),s=a(19),c=a(29),u=a(24),m="SET_CURRENT_USER",d="UPDATE_USER",h={isAuthenticated:!1,user:{},showFavorites:!1},p=a(49),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_BLOGS":return Object(p.a)(t.blogs);case"CREATE_BLOG":return Object(p.a)(e).concat([t.blog]);case"UPDATE_BLOG":return e.map(function(e){return e._id===t.id?t.blog:e});case"REMOVE_BLOG":return e.filter(function(e){return e._id!==t.id});default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_POSTS":return Object(p.a)(t.posts);case"CREATE_POST":return[t.post].concat(Object(p.a)(e));case"UPDATE_POST":return e.map(function(e){return e._id===t.id?t.post:e});case"REMOVE_POST":return e.filter(function(e){return e._id!==t.id});case"REMOVE_ALL_POSTS":default:return e}},v=Object(c.c)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{isAuthenticated:!!Object.keys(t.user).length,user:t.user,showFavorites:!1};case d:return Object(u.a)({},e,{user:Object(u.a)({},e.user,{profileImageUrl:t.data})});case"FAVORITE_BLOG":return Object(u.a)({},e,{user:Object(u.a)({},e.user,{favorites:t.blog})});case"SHOW_FAVORITE_BLOGS":return Object(u.a)({},e,{showFavorites:!t.boolean});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return Object(u.a)({},e,{message:t.error});case"REMOVE_ERROR":return Object(u.a)({},e,{message:null});default:return e}},blogs:g,posts:f}),b=a(128),E=a(72),y=a(129),N={key:"root",storage:a.n(y).a};Object(E.a)(N,v);var w=a(12),k=a(13),O=a(16),S=a(14),C=a(15),j=a(9),x=a(281),B=a(268),U=a(137),I=a(73),P=a.n(I);function T(e,t,a){return new Promise(function(n,r){return P.a[e.toLowerCase()](t,a).then(function(e){return n(e.data)}).catch(function(e){return r(e.response.data.error)})})}var R=function(e){return{type:"ADD_ERROR",error:e}},D=function(){return{type:"REMOVE_ERROR"}};function L(e){!function(e){e?P.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete P.a.defaults.headers.common.Authorization}(e)}function _(e){return{type:m,user:e}}function F(e,t){return console.log(t),function(a){return new Promise(function(n,r){return T("post","/api/auth/".concat(e),t).then(function(e){var t=e.token,r=Object(U.a)(e,["token"]);localStorage.setItem("jwtToken",t),L(t),a(_(r)),a(D()),n()}).catch(function(e){a(R(e.message)),r()})})}}var A=function(e){return function(t,a){var n=a().currentUser.user.id;return new Promise(function(a,r){return T("put","/api/user/".concat(n,"/fav"),{blogId:e}).then(function(e){a(),t({type:"FAVORITE_BLOG",blog:e})}).catch(function(e){t(R(e.message)),console.log(e),r()})})}},M=a(272),V=a(266),z=a(66),W=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.props.signUp?"signup":"signin";a.props.authUser(t,a.state).then(function(){console.log("fix this area")}).catch(function(){console.log("No")})},a.skip=function(e){console.log("skip here")},a.state={email:"",username:"",passsword:"",profileImageUrl:"https://i.imgur.com/Mc3lrXL.jpg","social.twitter":"","social.linkedin":"","social.github":"",bio:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.removeError()}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.username,n=this.props,o=n.buttonText,l=n.heading,i=n.login,s=n.signUp,c=n.errors,u=n.history,m=n.removeError,d=(n.handleClose,n.register);if(c.message)var h=u.listen(function(){m(),h()});return r.a.createElement("div",null,r.a.createElement("div",{className:"form-modal"},r.a.createElement("div",{id:"auth-form-header"},l),r.a.createElement("form",{onSubmit:this.handleSubmit},c.message&&r.a.createElement("div",{className:"alert alert-danger"},c.message),s&&r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control auth-form-input",id:"username",name:"username",onChange:this.handleChange,value:a,placeholder:"Username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control auth-form-input",id:"email",name:"email",onChange:this.handleChange,value:t,placeholder:"Email Address"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control auth-form-input",id:"password",name:"password",onChange:this.handleChange,placeholder:"Password"})),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn btn-primary btn-block btn-lg form-button"},o))),i&&r.a.createElement("div",{className:"auth-form-register"},r.a.createElement("div",null,"First time here?"),r.a.createElement("div",{className:"auth-form-signup-text",onClick:d}," Sign up!")),s&&r.a.createElement("div",{className:"auth-form-register"},r.a.createElement("div",null,"Just want to see the app?"),r.a.createElement("div",{className:"auth-form-signup-text",onClick:this.skip.bind(this)},"Skip here")))}}]),t}(n.Component);var G=Object(x.a)(Object(s.b)(function(e){return{favorites:e.currentUser.favorites||[],errors:e.errors}},{authUser:F,removeError:D})(W)),H=a(273),K=a(263),J=function(e){var t=e.userProfile,a=e.newBlog,n=e.logout,o=e.imageStyle,l=e.profileClicked;return r.a.createElement(H.a,{id:"dropdown-custom-menu"},r.a.createElement("div",{className:"navbar-profile",style:o,onClick:l,bsRole:"toggle"}),r.a.createElement(H.a.Menu,{className:"dropdown-menu",bsRole:"menu",style:{padding:""}},r.a.createElement(K.a,{onClick:t},r.a.createElement("i",{className:"fas fa-user"})," Profile"),r.a.createElement(K.a,{onClick:a},r.a.createElement("i",{className:"fas fa-newspaper"})," New Blog"),r.a.createElement(K.a,{divider:!0}),r.a.createElement(K.a,{onClick:n},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," Logout")))},Q=a(267),Y=a(264),q=a(274),X=a(40),$=a.n(X),Z={filter:""},ee=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).updateQueryParam=function(e){a.props.history.push({search:"?".concat($.a.stringify(Object(u.a)({},$.a.parse(a.props.location.search.replace("?","")),e)))})},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=Object(u.a)({},Z,$.a.parse(this.props.location.search.replace("?","")));return r.a.createElement(Y.a,null,r.a.createElement(q.a,{type:"text",placeholder:"Search Blogs..",value:t.filter,onChange:function(t){return e.updateQueryParam({filter:t.target.value})}}))}}]),t}(n.Component),te=Object(x.a)(ee),ae=a(279),ne=a(265),re=function(e){var t=e.showFavourites,a=e.favorite;return r.a.createElement(ae.a,{placement:"right",overlay:r.a.createElement(ne.a,null,"Toggle your favourites"),delayShow:300},r.a.createElement("i",{className:"fas fa-heart fa-2x icon-spacing",onClick:t,style:a}))},oe=function(e){var t=e.userProfile,a=e.newBlog,n=e.logout,o=e.pathname,l=e.showFavourites,i=e.favorite;return r.a.createElement(M.a.Collapse,null,r.a.createElement(V.a,null,o.includes("blogs")&&r.a.createElement("div",null,r.a.createElement(te,null),r.a.createElement(re,{showFavourites:l,favorite:i})),r.a.createElement(Q.a,{onClick:t},"Profile"),r.a.createElement(Q.a,{onClick:a},"New blog"),r.a.createElement(Q.a,{onClick:n},"Logout")))},le=a(271),ie=function(e){var t=e.handleLogin,a=e.handleSignup,n=e.handleRegister,o=e.modalShow,l=e.modalHide,i=e.login,s=e.signup;return r.a.createElement(M.a.Collapse,null,r.a.createElement(V.a,{pullRight:!0,className:"navbar-testing"},r.a.createElement(Q.a,{onClick:t,className:"navbar-auth"},"Log In"),r.a.createElement(Q.a,{onClick:a,className:"navbar-auth"},"Sign Up"),r.a.createElement(le.a,{bsSize:"small",show:o,onHide:l,style:{top:"25%",borderRadius:"5px !important"}},i&&r.a.createElement(G,{buttonText:"Log in",heading:"Welcome back!",login:!0,register:n}),s&&r.a.createElement(G,{buttonText:"Sign me up!",heading:"Register at Blog@",signUp:!0}))))},se=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).logout=function(e){e.preventDefault(),a.props.logout()},a.profileClicked=function(e){e.preventDefault()},a.state={show:!1,login:!1,signup:!1,isDesktop:!1,showFavs:!1},a.handleLoginShow=a.handleLoginShow.bind(Object(j.a)(Object(j.a)(a))),a.handleSignupShow=a.handleSignupShow.bind(Object(j.a)(Object(j.a)(a))),a.handleClose=a.handleClose.bind(Object(j.a)(Object(j.a)(a))),a.handleRegister=a.handleRegister.bind(Object(j.a)(Object(j.a)(a))),a.updatePredicate=a.updatePredicate.bind(Object(j.a)(Object(j.a)(a))),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.updatePredicate(),window.addEventListener("resize",this.updatePredicate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePredicate)}},{key:"handleClose",value:function(){this.setState({show:!1,login:!1,signup:!1})}},{key:"handleLoginShow",value:function(){this.setState({show:!0,login:!0})}},{key:"handleSignupShow",value:function(){this.setState({show:!0,signup:!0})}},{key:"handleRegister",value:function(){this.handleClose(),this.handleSignupShow()}},{key:"showFavourites",value:function(){this.setState({showFavs:!this.state.showFavs}),this.props.showFavoriteBlogs(this.props.currentUser.showFavorites)}},{key:"userProfile",value:function(e,t){this.props.history.push({pathname:"/user/".concat(e),state:{id:e}})}},{key:"newBlog",value:function(e,t){this.props.history.push({pathname:"/users/".concat(e,"/blog/new")})}},{key:"updatePredicate",value:function(){this.setState({isDesktop:window.innerWidth>767})}},{key:"render",value:function(){var e=this.state,t=e.isDesktop,a=e.show,n=e.login,o=e.signup,l=e.showFavs,i=this.props.history.location.pathname,s={opacity:"0.25",color:"black"},c={opacity:"0.85",color:"black"};return r.a.createElement(M.a,{collapseOnSelect:!0},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Brand,null,r.a.createElement(B.a,{to:"/",id:"navbar-title"},"Blog@")),r.a.createElement(M.a.Toggle,null)),t&&r.a.createElement(V.a,null,r.a.createElement(M.a.Form,null,i.includes("blogs")&&r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(te,null),r.a.createElement(re,{showFavourites:this.showFavourites.bind(this),favorite:l?c:s})))),this.props.currentUser.isAuthenticated?r.a.createElement(V.a,{pullRight:!0,className:"navbar-testing"},t?r.a.createElement(J,{imageStyle:{backgroundImage:"url(".concat(this.props.currentUser.user.profileImageUrl,")")},profileClicked:this.profileClicked.bind(this),userProfile:this.userProfile.bind(this,this.props.currentUser.user.id),newBlog:this.newBlog.bind(this,this.props.currentUser.user.id),logout:this.logout.bind(this)}):r.a.createElement(oe,{pathname:i,showFavourites:this.showFavourites.bind(this),favorite:l?c:s,userProfile:this.userProfile.bind(this,this.props.currentUser.user.id),newBlog:this.newBlog.bind(this,this.props.currentUser.user.id),logout:this.logout.bind(this)})):r.a.createElement(ie,{handleLogin:this.handleLoginShow,handleSignup:this.handleSignupShow,handleRegister:this.handleRegister,modalShow:a,modalHide:this.handleClose,login:n,signup:o}))}}]),t}(n.Component);var ce=Object(x.a)(Object(s.b)(function(e){return{currentUser:e.currentUser}},{logout:function(){return function(e){localStorage.clear(),L(!1),e(_({}))}},showFavoriteBlogs:function(e){return{type:"SHOW_FAVORITE_BLOGS",boolean:e}}})(se)),ue=a(280),me=a(270),de=a(276),he=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).state={show:!1,login:!1,signup:!1,timerText:0,spanText:"Test Text 0"},a.handleLoginShow=a.handleLoginShow.bind(Object(j.a)(Object(j.a)(a))),a.handleSignupShow=a.handleSignupShow.bind(Object(j.a)(Object(j.a)(a))),a.handleClose=a.handleClose.bind(Object(j.a)(Object(j.a)(a))),a.handleRegister=a.handleRegister.bind(Object(j.a)(Object(j.a)(a))),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1,login:!1,signup:!1})}},{key:"handleLoginShow",value:function(){this.setState({show:!0,login:!0})}},{key:"handleSignupShow",value:function(){this.setState({show:!0,signup:!0})}},{key:"handleRegister",value:function(){this.handleClose(),this.handleSignupShow()}},{key:"render",value:function(){return this.props.currentUser.isAuthenticated?r.a.createElement("div",null,r.a.createElement(de.a,{to:"/blogs"})):r.a.createElement("div",{className:"homepageTest"},r.a.createElement("ul",{className:"backgroundLoop"},r.a.createElement("li",null,r.a.createElement("span",null)),r.a.createElement("li",null,r.a.createElement("span",null)),r.a.createElement("li",null,r.a.createElement("span",null)),r.a.createElement("li",null,r.a.createElement("span",null)),r.a.createElement("li",null,r.a.createElement("span",null)),r.a.createElement("li",null,r.a.createElement("span",null))),r.a.createElement("div",{className:"home-hero"},r.a.createElement("p",{id:"titleText"},"Blog@"),r.a.createElement("p",{className:"descText"},"Welcome to Blog@, where you can create and share blogs with everyone."),r.a.createElement("p",{className:"descText"},"Create your first blog now about",r.a.createElement("div",{className:"slidingVertical"},r.a.createElement("span",null,"Adventure"),r.a.createElement("span",null,"Literature"),r.a.createElement("span",null,"Technology"),r.a.createElement("span",null,"Sport"),r.a.createElement("span",null,"Animals"),r.a.createElement("span",null,"Food"))),r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",{onClick:this.handleLoginShow,className:"infoBtn"},"Log In"),r.a.createElement("button",{onClick:this.handleSignupShow,className:"infoBtn"},"Sign Up"),r.a.createElement(le.a,{bsSize:"small",show:this.state.show,onHide:this.handleClose,style:{top:"25%",borderRadius:"5px !important"}},this.state.login&&r.a.createElement(G,{buttonText:"Log in",heading:"Welcome back!",login:!0,register:this.handleRegister}),this.state.signup&&r.a.createElement(G,{buttonText:"Sign me up!",heading:"Register at Blog@",signUp:!0})))))}}]),t}(n.Component),pe=a(48),ge=a.n(pe),fe=a(22),ve=a.n(fe),be=a(30),Ee=function(){return function(e){return T("get","/api/posts").then(function(t){e({type:"LOAD_POSTS",posts:t})}).catch(function(t){e(R(t.message))})}},ye=function(e,t,a,n,r,o){return function(l,i){var s=i().currentUser.user.id;return new Promise(function(i,c){return T("put","/api/users/".concat(s,"/blogs/").concat(r,"/posts/").concat(o),{title:e,content:t,image:a,layout:n}).then(function(e){i(),l({type:"UPDATE_POST",post:e,id:o})}).catch(function(e){l(R(e.message)),c()})})}},Ne=a(110),we=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleSubmit=function(){var e=Object(be.a)(ve.a.mark(function e(t){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.imageChecker(a.state.image);case 3:return e.next=5,a.props.updatePost(a.state.title,a.state.content,a.state.image,a.state.layout,a.props.blogId,a.props.postId).then(function(){a.setState({title:"",content:""}),a.props.handleClose()}).catch(function(){});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={title:a.props.title,content:a.props.content,image:a.props.image,layout:a.props.layout},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.removeError()}},{key:"imageChecker",value:function(e){e.includes("i.imgur.com")||(this.setState({image:""}),this.setState({layout:1}))}},{key:"handleRadioButton",value:function(e){this.setState({layout:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,o=t.errors,l=t.removeError,i=t.handleClose;if(o.message)var s=n.listen(function(){l(),s()});return r.a.createElement("div",{className:"form-modal"},r.a.createElement("div",{className:"form-header"},"Edit Post"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},o.message&&r.a.createElement("div",{className:"alert alert-danger"},o.message),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"input-section-text-extra"},"Create a short name for your blog post.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"image"},"Post Image and Layout"),r.a.createElement("div",{className:"input-section-text-extra"},"Use imgur.com to use an image and select your layout type")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("div",null,r.a.createElement("div",{className:"social-size"},"Image Url"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.image,onChange:function(t){return e.setState({image:t.target.value})}})),r.a.createElement("div",{className:"social-size"},"Select your layout"),r.a.createElement("div",{className:"input-section-radiobuttons"},r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(122),")")}}),r.a.createElement("input",{type:"radio",checked:1===this.state.layout,onChange:function(){return e.handleRadioButton(1)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(123),")")}}),r.a.createElement("input",{type:"radio",checked:2===this.state.layout,onChange:function(){return e.handleRadioButton(2)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(124),")")}}),r.a.createElement("input",{type:"radio",checked:3===this.state.layout,onChange:function(){return e.handleRadioButton(3)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(125),")")}}),r.a.createElement("input",{type:"radio",checked:4===this.state.layout,onChange:function(){return e.handleRadioButton(4)}}))))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"content"},"Content"),r.a.createElement("div",{className:"input-section-text-extra"},"Write up your blog post and keep it as detailed and interesting as possible, you will have the ability to edit this post later on.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("textarea",{cols:"30",rows:"10",className:"form-control",value:this.state.content,onChange:function(t){return e.setState({content:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-buttons"},r.a.createElement(Ne.a,{onClick:i,className:"form-button"},"Cancel"),r.a.createElement(Ne.a,{type:"submit",className:"btn btn-success form-button",style:{marginLeft:"5px"}},"Save changes"))))}}]),t}(n.Component);var ke=Object(s.b)(function(e){return{errors:e.errors}},{updatePost:ye,removeError:D})(we),Oe=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).state={show:!1},a.handleShow=a.handleShow.bind(Object(j.a)(Object(j.a)(a))),a.handleClose=a.handleClose.bind(Object(j.a)(Object(j.a)(a))),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.content,n=e.image,o=e.layout,l=e.username,i=e.date,s=e.updatedAt,c=e.isCorrectUser,u=e.removePost,m=e.postId,d=e.blogId;return r.a.createElement("div",{id:"post-container"},r.a.createElement("div",{id:"post-title"},t),r.a.createElement("div",{id:"post-details"},r.a.createElement("div",{className:"post-details-text"},"Article by ",l),r.a.createElement("div",null," | "),r.a.createElement("div",{className:"post-details-text"},this.props.date===this.props.updatedAt?r.a.createElement(ge.a,{fromNow:!0},i):r.a.createElement("div",null,r.a.createElement(ge.a,{fromNow:!0},i)," (last updated ",r.a.createElement(ge.a,{fromNow:!0},s),")")),c&&r.a.createElement("div",{id:"post-edit"},r.a.createElement(H.a,{id:"dropdown-custom-menu"},r.a.createElement("i",{className:"far fa-edit fa-2x edit-icon",onClick:this.handleClick.bind(this),bsRole:"toggle"}),r.a.createElement(H.a.Menu,{className:"dropdown-menu",bsRole:"menu",style:{padding:""}},r.a.createElement(K.a,{onClick:this.handleShow},"Edit Post"),r.a.createElement(K.a,{divider:!0}),r.a.createElement(K.a,{onClick:u},"Delete Post"))),r.a.createElement(le.a,{bsSize:"large",show:this.state.show,onHide:this.handleClose},r.a.createElement(ke,{title:t,content:a,image:n,layout:o,blogId:d,postId:m,handleClose:this.handleClose})))),1===o&&r.a.createElement("div",null,r.a.createElement("div",{className:"post-content"},a)),2===o&&r.a.createElement("div",null,r.a.createElement("div",{className:"post-layout2-image",style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:"post-content"},a)),3===o&&r.a.createElement("div",null,r.a.createElement("div",{className:"post-layout3-image",style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:"post-content"},a)),4===o&&r.a.createElement("div",null,r.a.createElement("div",{className:"post-layout4-image",style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:"post-content"},a)))}}]),t}(n.Component),Se=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleSubmit=function(){var e=Object(be.a)(ve.a.mark(function e(t){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.imageChecker(a.state.image);case 3:return e.next=5,a.props.createPost(a.state.title,a.state.content,a.state.image,a.state.layout,a.props.blogId).then(function(){a.props.handleClose()}).catch(function(){});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={title:"",image:"",content:"",layout:1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.removeError()}},{key:"imageChecker",value:function(e){e.includes("i.imgur.com")||(this.setState({image:""}),this.setState({layout:1}))}},{key:"handleRadioButton",value:function(e){this.setState({layout:e})}},{key:"getValidationTitleState",value:function(){return this.state.title.length>100?"error":null}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,o=t.errors,l=t.removeError,i=t.handleClose;if(o.message)var s=n.listen(function(){l(),s()});return r.a.createElement("div",{className:"form-modal"},r.a.createElement("div",{className:"form-header"},"Create Post"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},o.message&&r.a.createElement("div",{className:"alert alert-danger"},o.message),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"input-section-text-extra"},"Create a short name for your blog post.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement(Y.a,{validationState:this.getValidationTitleState()},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}}),r.a.createElement(q.a.Feedback,null)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"image"},"Post Image and Layout"),r.a.createElement("div",{className:"input-section-text-extra"},"Use imgur.com to use an image and select your layout type")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("div",null,r.a.createElement("div",{className:"social-size"},"Image Url"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.image,onChange:function(t){return e.setState({image:t.target.value})}})),r.a.createElement("div",{className:"social-size"},"Select your layout"),r.a.createElement("div",{className:"input-section-radiobuttons"},r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(122),")")}}),r.a.createElement("input",{type:"radio",checked:1===this.state.layout,onChange:function(){return e.handleRadioButton(1)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(123),")")}}),r.a.createElement("input",{type:"radio",checked:2===this.state.layout,onChange:function(){return e.handleRadioButton(2)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(124),")")}}),r.a.createElement("input",{type:"radio",checked:3===this.state.layout,onChange:function(){return e.handleRadioButton(3)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"layout-images",style:{backgroundImage:"url(".concat(a(125),")")}}),r.a.createElement("input",{type:"radio",checked:4===this.state.layout,onChange:function(){return e.handleRadioButton(4)}}))))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"content"},"Content"),r.a.createElement("div",{className:"input-section-text-extra"},"Write up your blog post and keep it as detailed and interesting as possible, you will have the ability to edit this post later on.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("textarea",{cols:"30",rows:"10",className:"form-control",value:this.state.content,onChange:function(t){return e.setState({content:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-buttons"},r.a.createElement(Ne.a,{onClick:i,className:"form-button"},"Cancel"),r.a.createElement(Ne.a,{type:"submit",className:"btn btn-success form-button",style:{marginLeft:"5px"}},"Create Blog Post"))))}}]),t}(n.Component);var Ce=Object(s.b)(function(e){return{errors:e.errors}},{createPost:function(e,t,a,n,r){return function(o,l){var i=l().currentUser.user.id;return new Promise(function(l,s){return T("post","/api/users/".concat(i,"/blogs/").concat(r,"/posts"),{title:e,content:t,image:a,layout:n}).then(function(e){l(),o({type:"CREATE_POST",post:e})}).catch(function(e){console.log(e),o(R(e.message)),s()})})}},removeError:D})(Se),je=function(){return function(e){return T("get","/api/blogs").then(function(t){e({type:"LOAD_BLOGS",blogs:t})}).catch(function(t){console.log(t),e(R(t.messsage))})}},xe=function(e){return function(t,a){var n=a().currentUser.user.id;return T("delete","/api/users/".concat(n,"/blogs/").concat(e)).then(function(a){t({type:"REMOVE_BLOG",id:e})}).catch(function(e){t(R(e.message))})}},Be=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.updateBlog(a.state.name,a.state.desc,a.state.image,a.props.blogId).then(function(){a.props.handleClose()}).catch(function(){})},a.state={name:a.props.blogName,desc:a.props.blogDescription,image:a.props.blogImage},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.removeError()}},{key:"getValidationNameState",value:function(){return this.state.name.length>100?"error":null}},{key:"getValidationDescState",value:function(){return this.state.desc.length>200?"error":null}},{key:"render",value:function(){var e=this,t=this.props,a=t.history,n=t.errors,o=t.removeError,l=t.handleClose;if(n.message)var i=a.listen(function(){o(),i()});return r.a.createElement("div",{className:"form-modal"},r.a.createElement("div",{className:"form-header"},"Edit Blog"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},n.message&&r.a.createElement("div",{className:"alert alert-danger"},n.message),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"name"},"Name"),r.a.createElement("div",{className:"input-section-text-extra"},"Create a blog about anything! but make sure the name is relevant")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement(Y.a,{validationState:this.getValidationNameState()},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement(q.a.Feedback,null)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"image"},"Image Url"),r.a.createElement("div",{className:"input-section-text-extra"},"Use imgur.com for hosting your blog image. Leave input blank for the default background.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.image,onChange:function(t){return e.setState({image:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"desc"},"Description"),r.a.createElement("div",{className:"input-section-text-extra"},"Describe best your blog and what users should expect from your continued blog posts.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement(Y.a,{validationState:this.getValidationDescState()},r.a.createElement("textarea",{cols:"30",rows:"5",type:"text",className:"form-control",value:this.state.desc,onChange:function(t){return e.setState({desc:t.target.value})}}),r.a.createElement(q.a.Feedback,null)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-buttons"},r.a.createElement(Ne.a,{onClick:l,className:"form-button"},"Cancel"),r.a.createElement(Ne.a,{type:"submit",className:"btn btn-success form-button",style:{marginLeft:"5px"}},"Save Changes"))))}}]),t}(n.Component);var Ue=Object(s.b)(function(e){return{errors:e.errors}},{updateBlog:function(e,t,a,n){return function(r,o){var l=o().currentUser.user.id;return new Promise(function(o,i){return T("put","/api/users/".concat(l,"/blogs/").concat(n),{blogName:e,blogDescription:t,blogImage:a}).then(function(e){o(),r({type:"UPDATE_BLOG",blog:e,id:n})}).catch(function(e){r(R(e.message)),console.log(e),i()})})}},removeError:D})(Be),Ie=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).deleteBlog=function(e){e.preventDefault(),a.props.deleteBlog(a.props.location.state.id).then(function(){a.props.history.push("/")}).catch(function(){})},a.editBlog=function(e){e.preventDefault()},a.state={show:!1,newPost:!1,editBlog:!1},a.handleNewPostShow=a.handleNewPostShow.bind(Object(j.a)(Object(j.a)(a))),a.handleEditBlogShow=a.handleEditBlogShow.bind(Object(j.a)(Object(j.a)(a))),a.handleClose=a.handleClose.bind(Object(j.a)(Object(j.a)(a))),a.handleClick=a.handleClick.bind(Object(j.a)(Object(j.a)(a))),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){console.log("componentDidMount")}},{key:"handleClick",value:function(e){e.preventDefault()}},{key:"userProfile",value:function(e,t){this.props.history.push({pathname:"/user/".concat(e),state:{id:e}})}},{key:"favoriteBlog",value:function(e,t){this.props.favoriteBlog(e),t.stopPropagation()}},{key:"handleClose",value:function(){this.setState({show:!1,newPost:!1,editBlog:!1,editPost:!1})}},{key:"handleNewPostShow",value:function(){this.setState({show:!0,newPost:!0})}},{key:"handleEditBlogShow",value:function(){this.setState({show:!0,editBlog:!0})}},{key:"handleEditPostShow",value:function(){this.setState({show:!0,editPost:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.blogs,n=t.posts,o=t.currentUser,l=t.removePost,i=t.favorites,s=a.find(function(t){return t._id===e.props.match.params.id}),c=n.filter(function(t){return t.blog._id===e.props.match.params.id}).map(function(t){return r.a.createElement(Oe,{key:t._id,title:t.title,content:t.content,image:t.imageUrl,layout:t.layout,username:t.user.username,date:t.createdAt,updatedAt:t.updatedAt,postId:t._id,blogId:t.blog._id,removePost:l.bind(e,t.user._id,t.blog._id,t._id),isCorrectUser:o===t.user._id})});return"undefined"!==typeof s?r.a.createElement("div",{className:"container blog-container"},r.a.createElement("div",{id:"blog-header-title"},r.a.createElement("div",{id:"blog-blogname"},s.blogName),r.a.createElement("div",{id:"blog-favourite"},r.a.createElement("i",{className:"fas fa-heart fa-3x",style:i.includes(s._id)?{opacity:"0.85",color:"black"}:{opacity:"0.25",color:"black"},onClick:this.favoriteBlog.bind(this,s._id)}))),r.a.createElement("div",{id:"blog-header"},r.a.createElement("div",{id:"blog-image",style:{backgroundImage:"url(".concat(s.blogImage,")")}})),r.a.createElement("div",{id:"blog-information"},r.a.createElement("div",{className:"blog-profile"},r.a.createElement("div",{id:"blog-profile-image",onClick:this.userProfile.bind(this,s.user._id),style:{backgroundImage:"url(".concat(s.user.profileImageUrl,")")}}),r.a.createElement("div",{id:"blog-blogowner"},r.a.createElement("div",{className:"blog-username",onClick:this.userProfile.bind(this,s.user._id)},"by ",s.user.username))),r.a.createElement("div",{id:"blog-description"},r.a.createElement("div",{id:"blog-description-text"},s.blogDescription),r.a.createElement("div",{id:"blog-description-info"},r.a.createElement("div",{id:"blog-created-date"},r.a.createElement("div",null,"Last Update: ",r.a.createElement(ge.a,{format:"Do MMM YYYY"},s.updatedAt))),r.a.createElement(le.a,{bsSize:"large",show:this.state.show,onHide:this.handleClose},this.state.newPost&&r.a.createElement(Ce,Object.assign({blogId:this.props.match.params.id,handleClose:this.handleClose},this.props)),this.state.editBlog&&r.a.createElement(Ue,Object.assign({blogId:this.props.match.params.id,handleClose:this.handleClose,blogName:s.blogName,blogDescription:s.blogDescription,blogImage:s.blogImage},this.props))))),o===s.user._id&&r.a.createElement("div",null,r.a.createElement(H.a,{id:"dropdown-custom-menu",pullRight:!0},r.a.createElement("i",{className:"far fa-edit fa-2x edit-icon",onClick:this.handleClick,bsRole:"toggle"}),r.a.createElement(H.a.Menu,{className:"dropdown-menu",bsRole:"menu",style:{padding:""}},r.a.createElement(K.a,{onClick:this.handleEditBlogShow},"Edit Blog"),r.a.createElement(K.a,{divider:!0}),r.a.createElement(K.a,{onClick:this.deleteBlog},"Delete Blog"))))),o===s.user._id&&r.a.createElement("div",{id:"blog-owner-buttons"},r.a.createElement(Ne.a,{className:"btn-override",bsSize:"large",onClick:this.handleNewPostShow},"New Post")),r.a.createElement("div",{className:"post-list"},c)):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"lds-dual-ring"}))}}]),t}(n.Component);var Pe=Object(x.a)(Object(s.b)(function(e){return{blogs:e.blogs,posts:e.posts,currentUser:e.currentUser.user.id,favorites:e.currentUser.user.favorites||[]}},{fetchPosts:Ee,fetchBlogs:je,removePost:function(e,t,a){return function(n){return new Promise(function(r,o){return T("delete","/api/users/".concat(e,"/blogs/").concat(t,"/posts/").concat(a)).then(function(){r(),n({type:"REMOVE_POST",id:a})}).catch(function(e){n(R(e.message)),o()})})}},updatePost:ye,deleteBlog:xe,favoriteBlog:A})(Ie)),Te=a(87),Re=a.n(Te),De=a(278),Le=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleSubmit=function(){var e=Object(be.a)(ve.a.mark(function e(t){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.profileImageChecker(a.state.profileImageUrl);case 3:return e.next=5,a.twitterCheck(a.state.twitter);case 5:return e.next=7,a.linkedinCheck(a.state.linkedin);case 7:return e.next=9,a.githubCheck(a.state.github);case 9:return e.next=11,a.updateUser(a.state.profileImageUrl,a.state.bio,a.state.twitter,a.state.linkedin,a.state.github,a.state.emailToggle);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={profileImageUrl:a.props.profileImageUrl,bio:a.props.bio,twitter:a.props.twitter,linkedin:a.props.linkedin,github:a.props.github,emailToggle:a.props.emailToggle},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"profileImageChecker",value:function(e){e.includes("i.imgur.com")||this.setState({profileImageUrl:"https://i.imgur.com/Mc3lrXL.jpg"})}},{key:"twitterCheck",value:function(e){e.includes("twitter.com")&&(e=e.replace(/https:\/\/twitter.com\//g,""),this.setState({twitter:e}))}},{key:"linkedinCheck",value:function(e){e.includes("linkedin.com")&&(e=e.replace(/https:\/\/www.linkedin.com\/in\//g,""),this.setState({linkedin:e}))}},{key:"githubCheck",value:function(e){e.includes("github.com")&&(e=e.replace(/https:\/\/github.com\//g,""),this.setState({github:e}))}},{key:"updateUser",value:function(){var e=Object(be.a)(ve.a.mark(function e(t,a,n,r,o,l){var i,s,c=this;return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.props.userId,e.next=3,T("put","/api/user/".concat(i),{profileImageUrl:t,bio:a,twitter:n,linkedin:r,github:o,emailToggle:l}).then(function(e){return c.props.handleClose(),c.props.updateCurrentUserImage(c.state.profileImageUrl),e}).catch(function(e){console.log(e)});case 3:s=e.sent,this.props.updateProfile(s);case 5:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,o,l){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.errors,n=t.handleClose;return r.a.createElement("div",{className:"form-modal"},r.a.createElement("div",{className:"form-header"},"Edit your profile"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},a.message&&r.a.createElement("div",{className:"alert alert-danger"},a.message),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"bio"},"Bio"),r.a.createElement("div",{className:"input-section-text-extra"},"Create a short Bio and let other users know a little more about you")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("textarea",{cols:"30",rows:"2",type:"text",className:"form-control",value:this.state.bio,onChange:function(t){return e.setState({bio:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{htmlFor:"image"},"Profile Image URL"),r.a.createElement("div",{className:"input-section-text-extra"},"Use imgur.com to upload a profile image to use, otherwise leave field blank to use the default profile image")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.profileImageUrl,onChange:function(t){return e.setState({profileImageUrl:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{htmlFor:"social"},"Social"),r.a.createElement("div",{className:"input-section-text-extra"},"Let users know of your other social media accounts")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("div",{className:"social-size"},"Twitter"),r.a.createElement(De.a,null,r.a.createElement(De.a.Addon,null,"https://twitter.com/"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.twitter,onChange:function(t){return e.setState({twitter:t.target.value})}})),r.a.createElement("div",{className:"social-size"},"Linkedin"),r.a.createElement(De.a,null,r.a.createElement(De.a.Addon,null,"https://www.linkedin.com/in/"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.linkedin,onChange:function(t){return e.setState({linkedin:t.target.value})}})),r.a.createElement("div",{className:"social-size"},"Github"),r.a.createElement(De.a,null,r.a.createElement(De.a.Addon,null,"https://github.com/"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.github,onChange:function(t){return e.setState({github:t.target.value})}})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("div",{className:"input-section-text-extra"},"Tick the box to let other users contact you by email.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("input",{type:"checkbox",value:this.state.emailToggle,defaultChecked:this.state.emailToggle,onChange:function(){return e.setState({emailToggle:!e.state.emailToggle})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-buttons"},r.a.createElement(Ne.a,{onClick:n,className:"form-button"},"Cancel"),r.a.createElement(Ne.a,{type:"submit",className:"btn btn-success form-button",style:{marginLeft:"5px"}},"Save Changes"))))}}]),t}(n.Component);var _e=Object(s.b)(function(e){return{errors:e.errors}},{updateCurrentUserImage:function(e){return{type:d,data:e}},removeError:D,setAuthorizationToken:L,setCurrentUser:_})(Le),Fe=a(275),Ae=a(269),Me=function(e){var t=e.blogName,a=e.blogDescription,n=e.blogImage,o=e.blogId,l=e.goBlog;return r.a.createElement("div",{className:"tab-blog",onClick:l.bind(void 0,o)},r.a.createElement("div",{className:"tab-blog-info"},r.a.createElement("div",{className:"tab-blog-name"},t),r.a.createElement("div",{className:"tab-blog-desc"},'"',a,'"')),r.a.createElement("div",{className:"tab-blog-test"},r.a.createElement("div",{className:"tab-blog-image",style:{backgroundImage:"url(".concat(n,")")}})))},Ve=function(e){var t=e.blogs,a=e.favourites,n=e.goBlog;return r.a.createElement(Fe.a.Container,{id:"left-tabs-example",defaultActiveKey:"first"},r.a.createElement(Ae.a,{className:"clearfix"},r.a.createElement(V.a,{bsStyle:"tabs"},r.a.createElement(Q.a,{className:"profile-tab",eventKey:"first"},"Blogs"),r.a.createElement(Q.a,{className:"profile-tab",eventKey:"second"},"Favourites")),r.a.createElement(Fe.a.Content,{animation:!0},r.a.createElement(Fe.a.Pane,{eventKey:"first"},r.a.createElement("div",{className:"tab-pane-container"},t.map(function(e){return r.a.createElement(Me,{key:e._id,blogName:e.blogName,blogDescription:e.blogDescription,blogImage:e.blogImage,goBlog:n,blogId:e._id})}))),r.a.createElement(Fe.a.Pane,{eventKey:"second"},r.a.createElement("div",{className:"tab-pane-container"},a.map(function(e){return r.a.createElement(Me,{key:e._id,blogName:e.blogName,blogDescription:e.blogDescription,blogImage:e.blogImage,goBlog:n,blogId:e._id})}))))))},ze=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).state={user:{},isLoading:!1,show:!1,userFavourites:[]},a.handleShow=a.handleShow.bind(Object(j.a)(Object(j.a)(a))),a.handleClose=a.handleClose.bind(Object(j.a)(Object(j.a)(a))),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"loadUser",value:function(){var e=Object(be.a)(ve.a.mark(function e(){var t,a,n;return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LoadUser"),t=this.props.match.params.id,e.next=4,T("get","/api/users/".concat(t)).then(function(e){return e}).catch(function(e){console.log(e)});case 4:return a=e.sent,e.next=7,T("get","/api/favourites/".concat(t));case 7:n=e.sent,this.setState({user:a}),this.setState({userFavourites:n}),this.setState({isLoading:!0});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(e){console.log("Hello?"),this.loadUser()}},{key:"goBlog",value:function(e){console.log("triggar"),console.log(e),this.props.history.push({pathname:"/blog/".concat(e),state:{blogId:e}})}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.isLoading,n=e.userFavourites,o=r.a.createElement(ne.a,null,t.email);return a?r.a.createElement("div",{className:"container profile-container"},r.a.createElement("div",{id:"profile-layout"},r.a.createElement("div",{id:"profile-information"},r.a.createElement("div",{id:"profile-picture",style:{backgroundImage:"url(".concat(t.profileImageUrl,")")}}),r.a.createElement("div",{id:"profile-details"},r.a.createElement("div",{id:"profile-name-and-edit"},r.a.createElement("div",{id:"profile-username"},t.username),r.a.createElement("i",{className:"far fa-edit fa-2x",onClick:this.handleShow}),r.a.createElement(le.a,{bsSize:"large",show:this.state.show,onHide:this.handleClose},r.a.createElement(_e,{userId:this.props.match.params.id,bio:t.bio,profileImageUrl:t.profileImageUrl,twitter:t.social.twitter,linkedin:t.social.linkedin,github:t.social.github,emailToggle:t.social.emailToggle,updateProfile:this.updateProfile.bind(this),handleClose:this.handleClose}))),r.a.createElement("div",null,r.a.createElement("div",{id:"profile-bio-info"},t.bio),r.a.createElement("div",{id:"profile-social"},t.social.twitter.length>1&&r.a.createElement("a",{href:"https://twitter.com/".concat(t.social.twitter)},r.a.createElement("i",{className:"fab fa-twitter fa-2x"})),t.social.linkedin.length>1&&r.a.createElement("a",{href:"https://www.linkedin.com/in/".concat(t.social.linkedin)},r.a.createElement("i",{className:"fab fa-linkedin-in fa-2x"})),t.social.github.length>1&&r.a.createElement("a",{href:"https://github.com/".concat(t.social.github)},r.a.createElement("i",{className:"fab fa-github fa-2x"})),t.social.emailToggle&&r.a.createElement(ae.a,{placement:"right",overlay:o},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-envelope-square fa-2x"}))))))),r.a.createElement("div",{id:"profile-blogs"},r.a.createElement(Ve,{blogs:t.blogs,favourites:n,goBlog:this.goBlog.bind(this)})))):r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"loading-ring-container"},r.a.createElement("div",{className:"lds-dual-ring"})))}}]),t}(n.Component),We=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.createNewBlog(a.state.name,a.state.desc,a.state.image).then(function(){a.setState({name:"",desc:"",image:""}),a.props.history.push("/")}).catch(function(){})},a.state={name:"",desc:"",image:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.removeError()}},{key:"getValidationNameState",value:function(){return this.state.name.length>100?"error":null}},{key:"getValidationDescState",value:function(){return this.state.desc.length>200?"error":null}},{key:"render",value:function(){var e=this,t=this.props.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-header"},"Create New Blog"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},t.message&&r.a.createElement("div",{className:"alert alert-danger"},t.message),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"name"},"Name"),r.a.createElement("div",{className:"input-section-text-extra"},"Create a blog about anything! but make sure the name is relevant")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement(Y.a,{validationState:this.getValidationNameState()},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement(q.a.Feedback,null)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"image"},"Image Url"),r.a.createElement("div",{className:"input-section-text-extra"},"Use imgur.com for hosting your blog image. Leave input blank for the default background.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.image,onChange:function(t){return e.setState({image:t.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-section"},r.a.createElement("div",{className:"input-section-text"},r.a.createElement("label",{className:"input-section-text-title",htmlFor:"desc"},"Description"),r.a.createElement("div",{className:"input-section-text-extra"},"Describe best your blog and what users should expect from your continued blog posts.")),r.a.createElement("div",{className:"input-section-input"},r.a.createElement(Y.a,{validationState:this.getValidationDescState()},r.a.createElement("textarea",{cols:"30",rows:"5",type:"text",className:"form-control",value:this.state.desc,onChange:function(t){return e.setState({desc:t.target.value})}}),r.a.createElement(q.a.Feedback,null)))),r.a.createElement("hr",null),r.a.createElement(Ne.a,{type:"submit",className:"btn btn-success pull-right form-button"},"Submit")))}}]),t}(n.Component);var Ge=Object(s.b)(function(e){return{errors:e.errors}},{createNewBlog:function(e,t,a){return function(n,r){var o=r().currentUser;""===a&&(a="https://i.imgur.com/Lnhq6yc.jpg");var l=o.user.id;return new Promise(function(r,o){return T("post","/api/users/".concat(l,"/blogs"),{blogName:e,blogDescription:t,blogImage:a}).then(function(e){r(),n({type:"CREATE_BLOG",blog:e})}).catch(function(e){console.log(e),n(R(e.message)),o()})})}},removeError:D})(We),He=function(e){var t=e.text,a=(e.desc,e.image);return r.a.createElement("div",{className:"blog-side side-front"},r.a.createElement("div",{id:"blog-card-image",style:{backgroundImage:"url(".concat(a,")")}}),r.a.createElement("div",{id:"blog-card-front-text"},t))},Ke=function(e){var t=e.desc,a=e.name,n=e.favToggle,o=e.favorite,l=e.profileImage,i=e.postCount,s=e.favCount;return r.a.createElement("div",{className:"blog-side side-back"},r.a.createElement("div",{id:"blog-back-desc"},t),r.a.createElement("div",{id:"blog-back-information"},r.a.createElement("div",null,r.a.createElement(ae.a,{placement:"bottom",overlay:r.a.createElement(ne.a,null,a),delayShow:300},r.a.createElement("div",{id:"blog-back-profile-image",style:{backgroundImage:"url(".concat(l,")")}}))),r.a.createElement("div",{className:"blog-back-icons"},r.a.createElement("i",{class:"far fa-newspaper fa-2x"}),r.a.createElement("div",{className:"blog-back-icons-text"},i)),r.a.createElement("div",{className:"blog-back-icons",onClick:n},r.a.createElement("i",{className:"fas fa-heart fa-2x",style:o}),r.a.createElement("div",{className:"blog-back-icons-text"},s))))},Je=function(e){var t=e.flippedProps,a=e.text,n=e.desc,o=e.image,l=e.username,i=e.favorite,s=e.profileImage,c=e.postCount,u=e.favCount,m=(e.date,e.isCorrectUser,e.favToggle),d=e.selectBlog,h=(e.removeBlog,e.ref);return r.a.createElement("div",Object.assign({onClick:d,className:"blogCard",ref:h},t),r.a.createElement("div",{className:"blogBody"},r.a.createElement(He,{text:a,image:o}),r.a.createElement(Ke,{desc:n,name:l,profileImage:s,favToggle:m,favorite:i,postCount:c,favCount:u})))},Qe=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"loading-ring-container"},r.a.createElement("div",{className:"lds-dual-ring"})))},Ye=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"blog-list-empty"},r.a.createElement("div",null,"No search results!")))},qe=a(92),Xe=(a(260),{filter:""}),$e=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).updateQueryParam=function(e){a.props.history.push({search:"?".concat($.a.stringify(Object(u.a)({},$.a.parse(a.props.location.search.replace("?","")),e)))})},a.state={blogList:[],favourites:[]},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPosts(),this.props.fetchBlogs()}},{key:"selectBlog",value:function(e,t){t.preventDefault(),this.props.history.push({pathname:"/blog/".concat(e),state:{id:e}})}},{key:"favoriteBlog",value:function(){var e=Object(be.a)(ve.a.mark(function e(t,a){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),console.log("boo"),e.next=4,this.props.favoriteBlog(t);case 4:return e.next=6,this.props.fetchBlogs();case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.blogs,n=t.currentUser,o=t.favorites,l=t.showFavourites,i={opacity:"0.25",color:"black"},s={opacity:"0.85",color:"black"},c=Object(u.a)({},Xe,$.a.parse(this.props.location.search.replace("?",""))),m=(l?a.filter(function(e){var t=e._id;return o.includes(t)}):a).filter(function(e){return e.blogName.toLowerCase().includes(c.filter)});return"undefined"!==typeof a?r.a.createElement("div",null,r.a.createElement(qe.b,{flipKey:m},0===m.length?r.a.createElement(Ye,null):r.a.createElement("div",{id:"blogs"},m.map(function(t){return r.a.createElement(qe.a,{key:t._id,flipId:t._id},function(a){return r.a.createElement(Je,{key:t._id,date:t.createAt,text:t.blogName,desc:t.blogDescription,image:t.blogImage,username:t.user.username,postCount:t.posts.length,favCount:t.favorites.length,profileImage:t.user.profileImageUrl,favToggle:e.favoriteBlog.bind(e,t._id),selectBlog:e.selectBlog.bind(e,t._id),favorite:o.includes(t._id)?s:i,isCorrectUser:n.id===t.user._id,flippedProps:a,navigate:e.navigate})})})))):r.a.createElement(Qe,null)}}]),t}(n.Component);var Ze=Object(x.a)(Object(s.b)(function(e){return{blogs:e.blogs||[],currentUser:e.currentUser.user,favorites:e.currentUser.user.favorites||[],showFavourites:e.currentUser.showFavorites}},{fetchBlogs:je,deleteBlog:xe,fetchPosts:Ee,favoriteBlog:A})($e)),et=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,"About Me"))};var tt=Object(x.a)(Object(s.b)(function(e){return{currentUser:e.currentUser,errors:e.errors}},{authUser:F,removeError:D})(function(e){var t=e.currentUser,a=e.authUser,n=e.errors,o=e.removeError,l=e.location;return console.log(t),r.a.createElement("div",{className:"Site-content"},r.a.createElement("section",{className:"route-section"},r.a.createElement(ue.a,{location:l},r.a.createElement(me.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(he,Object.assign({currentUser:t},e))}}),r.a.createElement(me.a,{exact:!0,path:"/blogs",component:Ze}),r.a.createElement(me.a,{exact:!0,path:"/signin",render:function(e){return r.a.createElement(G,Object.assign({removeError:o,errors:n,onAuth:a,buttonText:"Log in",heading:"Please log in to continue"},e))}}),r.a.createElement(me.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(G,Object.assign({removeError:o,errors:n,onAuth:a,buttonText:"Sign me up!",heading:"Join Blog@ today!",signUp:!0},e))}}),r.a.createElement(me.a,{path:"/users/:userId/blog/new",component:Ge}),r.a.createElement(me.a,{path:"/blog/:id",component:Pe}),r.a.createElement(me.a,{path:"/user/:id",component:ze}),r.a.createElement(me.a,{path:"/aboutme",component:et}))))})),at=function(){return r.a.createElement("footer",{id:"footer"},r.a.createElement("div",{id:"footer-flex"},r.a.createElement("div",{id:"footer-copyright"},"\xa9 2018-2019 Lewis Shaw. All rights reserved."),r.a.createElement(B.a,{to:"/aboutme"},r.a.createElement("div",null,"About"))))},nt=(a(261),function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(n.Component)),rt=Object(x.a)(nt),ot=Object(c.e)(v,Object(c.d)(Object(c.a)(b.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));Object(E.b)(ot);if(localStorage.jwtToken){L(localStorage.jwtToken);try{ot.dispatch(_(Re()(localStorage.jwtToken)))}catch(ct){ot.dispatch(_({}))}}var lt=function(){return r.a.createElement(s.a,{store:ot},r.a.createElement(i.a,null,r.a.createElement(rt,null,r.a.createElement("div",{className:"Site"},r.a.createElement(ce,null),r.a.createElement(tt,null),r.a.createElement(at,null)))))},it=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function st(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(lt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/lshaw212/blogat",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/lshaw212/blogat","/service-worker.js");it?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):st(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):st(e)})}}()}},[[138,2,1]]]);
//# sourceMappingURL=main.b77e1f54.chunk.js.map